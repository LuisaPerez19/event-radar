</div>
<div class="split-container">
  <div class="left-pane justify-content-center">
    <div class="name" style="text-align: left; margin-left: -100px;">
  <h1 style="color: white;"><%= @event.name %></h1>
</div>
    <% if @event.photos.attached? %>
  <% @event.photos.each do |photo| %>
    <%= cl_image_tag photo.key, height: 400, width: 600, crop: :fill, style: "float: left; margin-left: -100px;" %>
  <% end %>
<% end %>

<div style="clear: both; margin-bottom: 20px;"></div> <!-- Add space between the photos and Event Details -->
    <div class="info" style="margin-left: -147px">
      <span> <i class="fa-solid fa-location-dot"></i> <%= @event.location %></span>
    </div>
    <div class="date">
      <span > <i class="fa-solid fa-calendar-days"></i> <%= @event.start_date.strftime("%d/%m/%y - %T") %></span>
    </div>
<h2 style="margin-left: -100px; margin-top: 20px; color: white;"><strong>Event Details</strong></h2>
<p style="margin-left: -100px; color: white;">
  <%= @event.description %>
</p>
    <br>
</p>
      <div>



  </div>
  </div>

    <div class="right-pane">


    <h1>Billing info</h1>
      <div class="elem-group inlined">
        <label for="ticket_count">Tickets</label>
        <input type="number" id="ticket_count" name="total_tickets" placeholder="1" min="1" value="1" >
      </div>

      <div class="elem-group inlined">
        <label for="price_per_ticket">Price per Ticket</label>
        <input type="number" id="price_per_ticket" name="price_per_ticket" placeholder="<%= @event.price %>" min="0" value="<%= @event.price %>" readonly>
      </div>

      <div class="elem-group inlined">
        <label for="total_price">Total Price</label>
        <p id="total_price">Total Price: Â£<span id="display_total_price"><%= @event.price %></span></p>
      </div>



    <div class="map">
      <% if @event.photos.attached? %>
        <% @event.photos.each do |photo| %>
        <% end %>
      <% end %>
<div
  data-controller="map"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
  data-map-marker-value="<%= @marker.to_json %>"
  style="width: 400px; height: 200px; border-radius: 20px; overflow: hidden; margin-top: 20px;"
></div>


    </div>

    </div>
  </div>
    </div>
  </div>

</div>



<script>
const calculate = (pricePerTicket, ticketCount) => {
  if (isNaN(pricePerTicket) || isNaN(ticketCount)) {
    return total;
  }

  var total = pricePerTicket * ticketCount;
  updateTotalPrice(total);
}
function calculateTotalPrice(e){
  var pricePerTicket = parseFloat(document.getElementById("price_per_ticket").value)
  var ticketCountElement = e.target;
  var ticketCount = parseFloat(ticketCountElement.value)
  calculate(pricePerTicket, ticketCount)
}

function updateTotalPrice(total) {
  document.getElementById("display_total_price").textContent = total.toFixed(2);
}
document.addEventListener("DOMContentLoaded", function() {
  var ticketCountElement = document.getElementById("ticket_count");
  ticketCountElement.addEventListener("change", (e) => calculateTotalPrice(e));
});

</script>


<div>
      <br>
      <a href="<%= new_event_booking_path(@event) %>">
      <button type="button" class="btn btn-primary rounded-circle" style="padding: 10px 20px; background-color: #C069EC; color: white; border: 2px solid white;">Book Now</button>
    </a>
  </div>
